(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{35:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(20),s=n.n(r),i=n(22),o=n(3),l=n(0);var j=function(){return Object(l.jsxs)("main",{children:[Object(l.jsx)("h1",{children:"HOME"}),Object(l.jsxs)("div",{children:[Object(l.jsx)("img",{height:"300",width:"500",src:"http://localhost:5000/images/chia-fruit-drink.jpg",alt:"Chia Fruit Shake"}),Object(l.jsxs)("div",{children:["Photo by ",Object(l.jsx)("a",{href:"AUTHOR_LINK",children:"Brenda Godinez"})," on ",Object(l.jsx)("a",{href:"UNSPLASH_LINK",children:"Unsplash"})]})]}),Object(l.jsx)("a",{href:"/places",children:Object(l.jsx)("button",{className:"btn-primary",children:"Places Page"})})]})},u=n(4),m=n.n(u),d=n(6),h=n(7);var b=function(e){var t=Object(o.f)(),n=Object(c.useState)([]),a=Object(h.a)(n,2),r=a[0],s=a[1];Object(c.useEffect)((function(){(function(){var e=Object(d.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:5000/places");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,s(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var i=r.map((function(e){return Object(l.jsxs)("div",{className:"col-sm-6",children:[Object(l.jsx)("h2",{children:Object(l.jsx)("a",{href:"#",onClick:function(){return t.push("/places/".concat(e.placeId))},children:e.name})}),Object(l.jsx)("p",{className:"text-center",children:e.cuisines}),Object(l.jsx)("img",{style:{maxWidth:200},src:e.pic,alt:e.name}),Object(l.jsxs)("p",{className:"text-center",children:["Located in ",e.city,", ",e.state]})]},e.placeId)}));return Object(l.jsxs)("main",{children:[Object(l.jsx)("h1",{children:"Places to Rant or Rave About"}),Object(l.jsx)("div",{className:"row",children:i})]})},O=n(23),p=n(2),f=Object(c.createContext)();var x=function(e){var t=e.children,n=Object(c.useState)(null),a=Object(h.a)(n,2),r=a[0],s=a[1];return Object(c.useEffect)((function(){(function(){var e=Object(d.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:5000/authentication/profile",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,s(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(l.jsx)(f.Provider,{value:{currentUser:r,setCurrentUser:s},children:t})};var v=function(e){var t=e.comment,n=e.onDelete,a=Object(c.useContext)(f).currentUser,r=null;return(null===a||void 0===a?void 0:a.userId)===t.authorId&&(r=Object(l.jsx)("button",{className:"btn btn-danger",onClick:n,children:"Delete Comment"})),Object(l.jsxs)("div",{className:"border col-sm-4",children:[console.log("Author = "),console.log(t),Object(l.jsx)("h2",{className:"rant",children:t.rant?"Rant! \ud83d\ude21":"Rave! \ud83d\ude3b"}),Object(l.jsx)("h4",{children:t.content}),Object(l.jsx)("h3",{children:Object(l.jsxs)("strong",{children:["- ",t.author.firstName," ",t.author.lastName]})}),Object(l.jsxs)("h4",{children:["Rating: ",t.stars]}),r]})};var g=function(e){var t=e.place,n=e.onSubmit,a=Object(c.useContext)(f).currentUser,r=Object(c.useState)({content:"",stars:3,rant:!1,authorId:""}),s=Object(h.a)(r,2),i=s[0],o=s[1];return a?Object(l.jsxs)("form",{onSubmit:function(e){console.log("CURRENT USER:"),console.log(a),console.log(a.userId),console.log("SUBMITTING COMMENT"),e.preventDefault(),i.authorId=a.userId,n(i),o({content:"",stars:3,rant:!1,authorId:a.userId})},children:[Object(l.jsx)("div",{className:"row",children:Object(l.jsxs)("div",{className:"form-group col-sm-12",children:[Object(l.jsx)("label",{htmlFor:"content",children:"Content"}),Object(l.jsx)("textarea",{required:!0,value:i.content,onChange:function(e){return o(Object(p.a)(Object(p.a)({},i),{},{content:e.target.value}))},className:"form-control",id:"content",name:"content"})]})}),Object(l.jsxs)("div",{className:"row",children:[Object(l.jsxs)("div",{className:"form-group col-sm-4",children:[Object(l.jsx)("label",{htmlFor:"stars",children:"Star Rating"}),Object(l.jsx)("input",{value:i.stars,onChange:function(e){return o(Object(p.a)(Object(p.a)({},i),{},{stars:e.target.value}))},type:"range",step:"0.5",min:"1",max:"5",id:"stars",name:"stars",className:"form-control"})]}),Object(l.jsxs)("div",{className:"form-group col-sm-4",children:[Object(l.jsx)("label",{htmlFor:"rand",children:"Rant"}),Object(l.jsx)("input",{checked:t.rant,onClick:function(e){return o(Object(p.a)(Object(p.a)({},i),{},{rant:e.target.checked}))},type:"checkbox",id:"rant",name:"rant",className:"form-control"})]})]}),Object(l.jsx)("input",{className:"btn btn-primary",type:"submit",value:"Add Comment"})]}):Object(l.jsx)("p",{children:"You must be logged in to leave a comment"})};var N=function(){var e=Object(c.useContext)(f).currentUser,t=Object(o.g)().placeId,n=Object(o.f)(),a=Object(c.useState)(null),r=Object(h.a)(a,2),s=r[0],i=r[1];if(Object(c.useEffect)((function(){(function(){var e=Object(d.a)(m.a.mark((function e(){var n,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:5000/places/".concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:c=e.sent,i(c);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]),null===s)return Object(l.jsx)("h1",{children:"Loading"});function j(){return(j=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:5000/places/".concat(s.placeId),{method:"DELETE"});case 2:n.push("/places");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:5000/places/".concat(s.placeId,"/comments/").concat(t.commentId),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});case 2:i(Object(p.a)(Object(p.a)({},s),{},{comments:s.comments.filter((function(e){return e.commentId!==t.commentId}))}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return(b=Object(d.a)(m.a.mark((function e(t){var n,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:5000/places/".concat(s.placeId,"/comments"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return n=e.sent,e.next=5,n.json();case 5:c=e.sent,i(Object(p.a)(Object(p.a)({},s),{},{comments:[].concat(Object(O.a)(s.comments),[c])}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x=Object(l.jsx)("h3",{className:"inactive",children:"No comments yet!"}),N=Object(l.jsx)("h3",{className:"inactive",children:"Not yet rated"});if(s.comments.length){for(var y=s.comments.reduce((function(e,t){return e+t.stars}),0),C=Math.round(y/s.comments.length),w="",S=0;S<C;S++)w+="\u2b50\ufe0f";N=Object(l.jsxs)("h3",{children:[w," stars"]}),x=s.comments.map((function(e){return Object(l.jsx)(v,{comment:e,onDelete:function(){return function(e){return u.apply(this,arguments)}(e)}},e.commentId)}))}var k=null;return"admin"===(null===e||void 0===e?void 0:e.role)&&(k=Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("a",{className:"btn btn-warning",onClick:function(){n.push("/places/".concat(s.placeId,"/edit"))},children:"Edit"}),Object(l.jsx)("button",{type:"submit",className:"btn btn-danger",onClick:function(){return j.apply(this,arguments)},children:"Delete"})]})),Object(l.jsxs)("main",{children:[Object(l.jsxs)("div",{className:"row",children:[Object(l.jsxs)("div",{className:"col-sm-6",children:[Object(l.jsx)("img",{style:{maxWidth:200},src:s.pic,alt:s.name}),Object(l.jsxs)("h3",{children:["Located in ",s.city,", ",s.state]})]}),Object(l.jsxs)("div",{className:"col-sm-6",children:[Object(l.jsx)("h1",{children:s.name}),Object(l.jsx)("h2",{children:"Rating"}),N,Object(l.jsx)("br",{}),Object(l.jsx)("h2",{children:"Description"}),Object(l.jsxs)("h3",{children:[s.name," has been serving ",s.city,", ",s.state," since ",s.founded,"."]}),Object(l.jsxs)("h4",{children:["Serving ",s.cuisines,"."]}),Object(l.jsx)("br",{}),k]})]}),Object(l.jsx)("hr",{}),Object(l.jsx)("h2",{children:"Comments"}),Object(l.jsx)("div",{className:"row",children:x}),Object(l.jsx)("hr",{}),Object(l.jsx)("h2",{children:"Got Your Own Rant or Rave?"}),Object(l.jsx)(g,{place:s,onSubmit:function(e){return b.apply(this,arguments)}})]})};var y=function(){var e=Object(o.f)(),t=Object(c.useContext)(f).currentUser,n=Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("li",{style:{float:"right"},children:Object(l.jsx)("a",{href:"#",onClick:function(){return e.push("/sign-up")},children:"Sign Up"})}),Object(l.jsx)("li",{style:{float:"right"},children:Object(l.jsx)("a",{href:"#",onClick:function(){return e.push("/login")},children:"Login"})})]});t&&(n=Object(l.jsxs)("li",{style:{float:"right"},children:["Logged in as ",t.firstName," ",t.lastName]}));var a=null;return"admin"===(null===t||void 0===t?void 0:t.role)&&(a=Object(l.jsx)("li",{children:Object(l.jsx)("a",{href:"#",onClick:function(){return e.push("/places/new")},children:"Add Place"})})),Object(l.jsx)("nav",{children:Object(l.jsxs)("ul",{children:[Object(l.jsx)("li",{children:Object(l.jsx)("a",{href:"#",onClick:function(){return e.push("/")},children:"Home"})}),Object(l.jsx)("li",{children:Object(l.jsx)("a",{href:"#",onClick:function(){return e.push("/places")},children:"Places"})}),a,n]})})};var C=function(){return Object(l.jsxs)("main",{children:[Object(l.jsx)("h1",{children:"404: PAGE NOT FOUND"}),Object(l.jsx)("p",{children:"Oops, sorry, we can't find this page!"}),Object(l.jsx)("img",{src:"http://localhost:5000/images/kittykat.jpeg",alt:"cute cat pic"})]})};var w=function(){(0,Object(c.useContext)(f).setCurrentUser)(null),console.log("CUR USER = NULLLLLL");var e=Object(o.f)(),t=Object(c.useState)({name:"",pic:"",city:"",state:"",cuisines:""}),n=Object(h.a)(t,2),a=n[0],r=n[1];function s(){return(s=Object(d.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,fetch("http://localhost:5000/places",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 3:e.push("/places");case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(l.jsxs)("main",{children:[Object(l.jsx)("h1",{children:"Add a New Place"}),Object(l.jsxs)("form",{onSubmit:function(e){return s.apply(this,arguments)},children:[Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"name",children:"Place Name"}),Object(l.jsx)("input",{required:!0,value:a.name,onChange:function(e){return r(Object(p.a)(Object(p.a)({},a),{},{name:e.target.value}))},className:"form-control",id:"name",name:"name"})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"founded",children:"Year Founded"}),Object(l.jsx)("input",{required:!0,value:a.founded,onChange:function(e){return r(Object(p.a)(Object(p.a)({},a),{},{founded:e.target.value}))},className:"form-control",id:"founded",name:"founded"})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"pic",children:"Place Picture"}),Object(l.jsx)("input",{value:a.pic,onChange:function(e){return r(Object(p.a)(Object(p.a)({},a),{},{pic:e.target.value}))},className:"form-control",id:"pic",name:"pic"})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"city",children:"City"}),Object(l.jsx)("input",{value:a.city,onChange:function(e){return r(Object(p.a)(Object(p.a)({},a),{},{city:e.target.value}))},className:"form-control",id:"city",name:"city"})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"state",children:"State"}),Object(l.jsx)("input",{value:a.state,onChange:function(e){return r(Object(p.a)(Object(p.a)({},a),{},{state:e.target.value}))},className:"form-control",id:"state",name:"state"})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"cuisines",children:"Cuisines"}),Object(l.jsx)("input",{value:a.cuisines,onChange:function(e){return r(Object(p.a)(Object(p.a)({},a),{},{cuisines:e.target.value}))},className:"form-control",id:"cuisines",name:"cuisines",required:!0})]}),Object(l.jsx)("input",{className:"btn btn-primary",type:"submit",value:"Add Place"})]})]})};var S=function(){var e=Object(o.f)(),t=Object(o.g)().placeId,n=Object(c.useState)({name:"",pic:"",city:"",state:"",cuisines:""}),a=Object(h.a)(n,2),r=a[0],s=a[1];function i(){return(i=Object(d.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,fetch("http://localhost:5000/places/".concat(r.placeId),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 3:e.push("/places/".concat(r.placeId));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(c.useEffect)((function(){(function(){var e=Object(d.a)(m.a.mark((function e(){var n,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:5000/places/".concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:c=e.sent,s(c);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(l.jsxs)("main",{children:[Object(l.jsx)("h1",{children:"Edit Place"}),Object(l.jsxs)("form",{onSubmit:function(e){return i.apply(this,arguments)},children:[Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"name",children:"Place Name"}),Object(l.jsx)("input",{required:!0,value:r.name,onChange:function(e){return s(Object(p.a)(Object(p.a)({},r),{},{name:e.target.value}))},className:"form-control",id:"name",name:"name"})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"founded",children:"Year Founded"}),Object(l.jsx)("input",{required:!0,value:r.founded,onChange:function(e){return s(Object(p.a)(Object(p.a)({},r),{},{founded:e.target.value}))},className:"form-control",id:"founded",name:"founded"})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"pic",children:"Place Picture"}),Object(l.jsx)("input",{value:r.pic,onChange:function(e){return s(Object(p.a)(Object(p.a)({},r),{},{pic:e.target.value}))},className:"form-control",id:"pic",name:"pic"})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"city",children:"City"}),Object(l.jsx)("input",{value:r.city,onChange:function(e){return s(Object(p.a)(Object(p.a)({},r),{},{city:e.target.value}))},className:"form-control",id:"city",name:"city"})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"state",children:"State"}),Object(l.jsx)("input",{value:r.state,onChange:function(e){return s(Object(p.a)(Object(p.a)({},r),{},{state:e.target.value}))},className:"form-control",id:"state",name:"state"})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"cuisines",children:"Cuisines"}),Object(l.jsx)("input",{value:r.cuisines,onChange:function(e){return s(Object(p.a)(Object(p.a)({},r),{},{cuisines:e.target.value}))},className:"form-control",id:"cuisines",name:"cuisines",required:!0})]}),Object(l.jsx)("input",{className:"btn btn-primary",type:"submit",value:"Save"})]})]})};var k=function(){var e=Object(o.f)(),t=Object(c.useState)({firstName:"",lastName:"",email:"",password:""}),n=Object(h.a)(t,2),a=n[0],r=n[1];function s(){return(s=Object(d.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,fetch("http://localhost:5000/users/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 3:e.push("/");case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(l.jsxs)("main",{children:[Object(l.jsx)("h1",{children:"Sign Up"}),Object(l.jsxs)("form",{onSubmit:function(e){return s.apply(this,arguments)},children:[Object(l.jsxs)("div",{className:"row",children:[Object(l.jsxs)("div",{className:"col-sm-6 form-group",children:[Object(l.jsx)("label",{htmlFor:"firstName",children:"First Name"}),Object(l.jsx)("input",{required:!0,value:a.firstName,onChange:function(e){return r(Object(p.a)(Object(p.a)({},a),{},{firstName:e.target.value}))},className:"form-control",id:"firstName",name:"firstName"})]}),Object(l.jsxs)("div",{className:"col-sm-6 form-group",children:[Object(l.jsx)("label",{htmlFor:"lastName",children:"Last Name"}),Object(l.jsx)("input",{required:!0,value:a.lastName,onChange:function(e){return r(Object(p.a)(Object(p.a)({},a),{},{lastName:e.target.value}))},className:"form-control",id:"lastName",name:"lastName"})]})]}),Object(l.jsxs)("div",{className:"row",children:[Object(l.jsxs)("div",{className:"col-sm-6 form-group",children:[Object(l.jsx)("label",{htmlFor:"email",children:"Email"}),Object(l.jsx)("input",{type:"email",required:!0,value:a.email,onChange:function(e){return r(Object(p.a)(Object(p.a)({},a),{},{email:e.target.value}))},className:"form-control",id:"email",name:"email"})]}),Object(l.jsxs)("div",{className:"col-sm-6 form-group",children:[Object(l.jsx)("label",{htmlFor:"password",children:"Password"}),Object(l.jsx)("input",{type:"password",required:!0,value:a.password,onChange:function(e){return r(Object(p.a)(Object(p.a)({},a),{},{password:e.target.value}))},className:"form-control",id:"password",name:"password"})]})]}),Object(l.jsx)("input",{className:"btn btn-primary",type:"submit",value:"Sign Up"})]})]})};var I=function(){var e=Object(o.f)(),t=Object(c.useContext)(f).setCurrentUser,n=Object(c.useState)({email:"",password:""}),a=Object(h.a)(n,2),r=a[0],s=a[1],i=Object(c.useState)(null),j=Object(h.a)(i,2),u=j[0],b=j[1];function O(){return(O=Object(d.a)(m.a.mark((function n(c){var a,s;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c.preventDefault(),n.next=3,fetch("http://localhost:5000/authentication/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 3:return a=n.sent,console.log("CRENDITIALS = ",r),n.next=7,a.json();case 7:s=n.sent,200===a.status?(t(s.user),localStorage.setItem("token",s.token),e.push("/")):b(s.message);case 9:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(l.jsxs)("main",{children:[Object(l.jsx)("h1",{children:"Login"}),null!==u?Object(l.jsx)("div",{className:"alert alert-danger",role:"alert",children:u}):null,Object(l.jsxs)("form",{onSubmit:function(e){return O.apply(this,arguments)},children:[Object(l.jsxs)("div",{className:"row",children:[Object(l.jsxs)("div",{className:"col-sm-6 form-group",children:[Object(l.jsx)("label",{htmlFor:"email",children:"Email"}),Object(l.jsx)("input",{type:"email",required:!0,value:r.email,onChange:function(e){return s(Object(p.a)(Object(p.a)({},r),{},{email:e.target.value}))},className:"form-control",id:"email",name:"email"})]}),Object(l.jsxs)("div",{className:"col-sm-6 form-group",children:[Object(l.jsx)("label",{htmlFor:"password",children:"Password"}),Object(l.jsx)("input",{type:"password",required:!0,value:r.password,onChange:function(e){return s(Object(p.a)(Object(p.a)({},r),{},{password:e.target.value}))},className:"form-control",id:"password",name:"password"})]})]}),Object(l.jsx)("input",{className:"btn btn-primary",type:"submit",value:"Login"})]})]})};var F=function(){return Object(l.jsx)(x,{children:Object(l.jsxs)(i.a,{children:[Object(l.jsx)(y,{}),Object(l.jsxs)(o.c,{children:[Object(l.jsx)(o.a,{exact:!0,path:"/",component:j}),Object(l.jsx)(o.a,{exact:!0,path:"/sign-up",component:k}),Object(l.jsx)(o.a,{exact:!0,path:"/login",component:I}),Object(l.jsx)(o.a,{exact:!0,path:"/places",component:b}),Object(l.jsx)(o.a,{exact:!0,path:"/places/new",component:w}),Object(l.jsx)(o.a,{exact:!0,path:"/places/:placeId",component:N}),Object(l.jsx)(o.a,{exact:!0,path:"/places/:placeId/edit",component:S}),Object(l.jsx)(o.a,{path:"/",component:C})]})]})})};s.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(F,{})}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.3aef1657.chunk.js.map